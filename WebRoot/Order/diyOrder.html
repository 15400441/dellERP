<!DOCTYPE html>
<html>
<head>
<title>Dell DIY your PC</title>
<meta name="description" content="Dell: Select the components you like to assemble your PC">
<meta name="keywords" content="Dell PC Assemble">


 
<link href="http://js.3conline.com/pconline/2014/revision/css/mydiy.css" rel="stylesheet" type="text/css" charset="gbk"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link href="../assets/css/bootstrap.min.css" rel="stylesheet" /> 
<link href="../assets/css/login-register.css" rel="stylesheet" />
<link rel="stylesheet" href="../assets/css/font-awesome.css"> 


</head>
<body>
<div class="row">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                 <a class="btn big-login" data-toggle="modal" href="javascript:void(0)" onclick="openLoginModal();">Log in</a>
                 <a class="btn big-register" data-toggle="modal" href="javascript:void(0)" onclick="openRegisterModal();">Register</a></div>
            <div class="col-sm-4"></div>
</div>
       
         
  <div class="modal fade login" id="loginModal">
          <div class="modal-dialog login animated">
              <div class="modal-content">
                 <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Login with</h4>
                    </div>
                    <div class="modal-body">  
                        <div class="box">
                             <div class="content">
                                <div class="social">
                                    <a class="circle github" href="/auth/github">
                                        <i class="fa fa-github fa-fw"></i>
                                    </a>
                                    <a id="google_login" class="circle google" href="/auth/google_oauth2">
                                        <i class="fa fa-google-plus fa-fw"></i>
                                    </a>
                                    <a id="facebook_login" class="circle facebook" href="/auth/facebook">
                                        <i class="fa fa-facebook fa-fw"></i>
                                    </a>
                                </div>
                                <div class="division">
                                    <div class="line l"></div>
                                      <span>or</span>
                                    <div class="line r"></div>
                                </div>
                                <div class="error"></div>
                                <div class="form loginBox">
                                    <form method="post" action="/login" accept-charset="UTF-8">
                                    <input id="email" class="form-control" type="text" placeholder="Email" name="email">
                                    <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                                    <input class="btn btn-default btn-login" type="button" value="Login" onclick="loginAjax()">
                                    </form>
                                </div>
                             </div>
                        </div>
                        <div class="box">
                            <div class="content registerBox" style="display:none;">
                             <div class="form">
                                <form method="post" html="{:multipart=>true}" data-remote="true" action="/register" accept-charset="UTF-8">
                                <input id="email" class="form-control" type="text" placeholder="Email" name="email">
                                <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                                <input id="password_confirmation" class="form-control" type="password" placeholder="Repeat Password" name="password_confirmation">
                                <input class="btn btn-default btn-register" type="submit" value="Create account" name="commit">
                                </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="forgot login-footer">
                            <span>Looking to 
                                 <a href="javascript: showRegisterForm();">create an account</a>
                            ?</span>
                        </div>
                        <div class="forgot register-footer" style="display:none">
                             <span>Already have an account?</span>
                             <a href="javascript: showLoginForm();">Login</a>
                        </div>
                    </div>        
              </div>
          </div>
  </div>

  <input type="hidden" id="selected_area" name="selected_area" value=""/> 
  <!-- /header -->
  <!-- /wraper -->
  <div class="wraper" id="Jwrap">
    <div class="area area-sc1">
      <div class="tab-nav-a">
        <p class="tab-nav-a-head">请选择配件</p>
          <div class="control clearfix" id="paginate-picker">
                <span class="toc" type="0" rel="1">CPU</span>
                <span class="toc" type="1" rel="2">主板</span>
                <span class="toc" type="2" rel="3">内存</span>
                <span class="toc" type="3" rel="4">机械硬盘</span>
                <span class="toc" type="4" rel="5">固态硬盘</span>
                <span class="toc" type="5" rel="6">显卡</span>
                <span class="toc" type="6" rel="7">机箱</span>
                <span class="toc" type="7" rel="8">电源</span>
                <span class="toc" type="8" rel="9">显示器</span>
                <span class="toc" type="9" rel="10">键鼠套装</span>
                <span class="toc" type="10" rel="11">键盘</span>
                <span class="toc" type="11" rel="12">鼠标</span>
                <span class="toc" type="12" rel="13">音箱</span>
                <span class="toc" type="13" rel="14">散热器</span>
                <span class="toc" type="14" rel="15">声卡</span>
                <span class="toc" type="15" rel="16">光驱</span>
                <span class="toc" type="16" rel="17">耳机</span>
          </div>
      </div>
      <div class="tab-wrap-a">
       
      

  
<script>//document.domain="pconline.com.cn";</script>
<script language="javaScript" src="http://www.pconline.com.cn/js/script/checkForm.js" charset="GBK"></script>
  <script language="javaScript" >
  <!--
     function subdata(mystr){
//              var mystr = document.eventform.ckcpu.value;
              location=mystr;
     }
     function checkSelectProduct(){
      //必选配件检测:CPU、主板、内存
      for(i = 1; i <= 3; i++) {
        var tr = $("tr", paper.dom)[i-1],ts = $$("textarea",tr);
        
        if(ts[0].value == "" || ts[1].value == "" || ts[1].value == 0 || ts[2].value == "" || ts[2].value == 0) {
            if(i == 1) {
                alert("请选择CPU！");
                return false;
            }
            if(i == 2) {
                alert("请选择主板！");
                return false;
            }
            if(i == 3) {
                alert("请选择内存！");
                return false;
            }
        }
      }
      return true;
     }
     
    function isInteger(strInteger) { //判断是否整数
    var newPar=/^(-|\+)?\d+$/;
    return newPar.test(strInteger);
  } 

    //添加cookie
  function setCookie(name, value){
    document.cookie=name + "="+escape(value)+"; path=/; domain="+window.location.hostname.replace(/\w+((\.\w+)+)/,"$1")+"; expires="+new Date().toGMTString().replace(/\d\d:\d\d:\d\d GMT|UTC$/,"23:59:59");
  }
  //读取cookie
  function getCookie(name) {
    return unescape(document.cookie.replace(new RegExp(".*(?:^|; )"+name+"=([^;]*).*|.*"),"$1"));
  }
  //删除cookie
  function delCookie(name) {
    var date = new Date();
    date.setTime(date.getTime() - 24 * 60 * 60 * 1000);
    document.cookie = name + "=null; path=/; domain="+window.location.hostname.replace(/\w+((\.\w+)+)/,"$1")+"; expires=" + date.toGMTString();
  }
  //手动填写
  function doSaveConfig(currentType,type) {
    currentT = parseInt( currentType );
    //必选配件检测
    //var tr = paper.dom[currentT+ix], ts = $("textarea",tr);
    var tr = $("tr", paper.dom)[currentType],ts = $$("textarea",tr);
    if(ts[0].value == "") {
      return false;
    } else{
      $("a.remove",document)[currentT].style.display="block";
    } 
    if( !isInteger(ts[2].value) || ts[2].value == 0) {
      ts[2].value = "";
      return false;
    } else if(!isInteger(ts[1].value) || ts[1].value == 0) {
      ts[1].value = "";
      return false;
    }
    
    var rurl = "diycookie.jsp?r=" + new Date().getTime() ;
    var sessionName = $$("#sessionName"+(currentT+1)).value;
    var areaId = $$("#selected_area").value;
    var brand = replaceDangerCode(ts[0].value);
    var pid = $$("#pid"+(currentT+1)).value;//产品ID
    var purl = $$("#purl"+(currentT+1)).value;//产品URL
    var picUrl = $$("#picUrl"+(currentT+1)).value;//产品图片URL
    picUrl = picUrl.replace(/\+/gi,'±');
    var data = "sessionName="+escape(sessionName)+"&blue_PrintID=&areaID="+areaId+"&opr="+type+"&mnum="+escape(ts[1].value)+"&mprice="+escape(ts[2].value)+"&mbrand="+encodeURI(encodeURIComponent(brand))+"&productId="+pid+"&url="+encodeURIComponent(purl)+"&picUrl="+encodeURIComponent(picUrl);
    $.ajax({url:rurl,async:true,method:"post",data:data,success:success});
    return;
  }
  //移除
  function removeConfig(currentType) {
    var rurl = "diycookie.jsp?r=" + new Date().getTime();
    var sessionName = $$("#sessionName"+(currentType)).value;
    var data = "sessionName="+escape(sessionName)+"&opr=del";
    $.ajax({url:rurl,async:true,method:"post",data:data,success:success});
    return;
  }
  function reviewConfig() {
    if(checkSelectProduct()) {
      //window.open('htmToTxt.jsp?totalNum='+$$('#domTotalPrice').innerHTML, '_blank');
      $$("#opr").value="review";
      $$("#formPaper").target = "_self";
      $$("#formPaper").submit();
    } 
  }

  
  //提交验证
  function submitCheck() {
    $$("#opr").value="add";
    var products = paper.products;
    var len = products.length;

    //必选配件检测:CPU、主板、内存价格
    for(i = 0; i < 3; i++) {
      var ts = $("#paper tbody tr").eq(i).find("textarea");
        if(ts.eq(0).val() != "" && ts.eq(1).val() != "" &&  ts.eq(2).val() == "") {
          if(i == 0) {
              alert("请填写CPU的价格！");
              return false;
          }
          if(i == 1) {
              alert("请填写主板的价格！");
              return false;
          }
          if(i == 2) {
              alert("请填写内存的价格！");
              return false;
          }
        }
    }
    
    //必选配件检测:CPU、主板、内存
    for(i = 0; i < 3; i++) {
      var ts = $("#paper tbody tr").eq(i).find("textarea");
        if(ts.eq(0).val() == "" || ts.eq(1).val() == "" ) {
          if(i == 0) {
              alert("请选择CPU！");
              return false;
          }
          if(i == 1) {
              alert("请选择主板！");
              return false;
          }
          if(i == 2) {
              alert("请选择内存！");
              return false;
          }
        }
    }

    var diyTitle = $("#DiyTitle").val();
    if(!diyTitle.trim()) {
      alert("标题不能为空！");
      return false;
    }
    for(var i = 0; i < len; i++) {
      if(products[i].name.value ) {
        if(!products[i].price.value) {
          alert("请填写" + page.nameList[i] + "的价格！");
          $("#paper tbody tr").eq(i).find("textarea")[2].focus();
          return false;
        }
      }
    }
    var captcha = $('#captcha').val();
    if(!captcha) {
      alert('请输入的验证码！');
      return false;
    }
    contentPay();
    return Login();
    
  }
  
  //预览验证
  function previewCheck() {   
    contentPay();
    
    
    var products = paper.products;
    var len = products.length;

    //必选配件检测:CPU、主板、内存价格
    for(i = 0; i < 3; i++) {
      var ts = $("#paper tbody tr").eq(i).find("textarea");
        if(ts.eq(0).val() != "" && ts.eq(1).val() != "" &&  ts.eq(2).val() == "") {
          if(i == 0) {
              alert("请填写CPU的价格！");
              return false;
          }
          if(i == 1) {
              alert("请填写主板的价格！");
              return false;
          }
          if(i == 2) {
              alert("请填写内存的价格！");
              return false;
          }
        }
    }
    //必选配件检测:CPU、主板、内存
    for(i = 0; i < 3; i++) {
      var ts = $("#paper tbody tr").eq(i).find("textarea");
        if(ts.eq(0).val() == "" || ts.eq(1).val() == "") {
          if(i == 0) {
              alert("请选择CPU！");
              return false;
          }
          if(i == 1) {
              alert("请选择主板！");
              return false;
          }
          if(i == 2) {
              alert("请选择内存！");
              return false;
          }
        }
    }

    var diyTitle = $("#DiyTitle").val();
    if(!diyTitle.trim()) {
      alert("标题不能为空！");
      return false;
    }
    for(var i = 0; i < len; i++) {
      if(products[i].name.value) {
        if(!products[i].price.value) {
          alert("请填写" + page.nameList[i] + "的价格！");
          $("#paper tbody tr").eq(i).find("textarea")[2].focus();
          return false;
        }
      }
    }
    var captcha = $('#captcha').val();
    if(!captcha) {
      alert('请输入的验证码！');
      return false;
    }
    
    
    
    return Preview();
    
  }
  

  //弹窗
  function Popup(config){
    var title = config.title || '来自网页的信息',
      content = config.content || '',
      btns = config.btns || {'关闭':function(){this.close()}},
      css = config.css || {width: 500},
      
      body = document.body,
      doc = document.documentElement,
      self = this;
    
    //填充  
    var wrap = document.createElement('div'), str = '';
    wrap.className = 'popup';
    str += '<div class="bg"></div>';
    str += '<div class="popupWrap" style="width:'+ css.width +'px">';
    str += '  <div class="header"><div class="title">'+ title +'</div><a href="#" class="close" title="关闭"></a></div>';
    str += '  <div class="content">'+ content +'</div>';
    str += '  <div class="footer"><div></div></div>';
    str += '</div>';
    wrap.innerHTML = str;
    wrap = body.appendChild(wrap);
    
    //获取
    var close = $$('.close', wrap)[0],
      bg = $$('.bg', wrap)[0],
      box = $$('.popupWrap', wrap)[0],
      footer = $$('.footer', wrap)[0].firstChild;
    
    //设置
    var st = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop;
    box.style.top = st + doc.clientHeight/2 - box.clientHeight/2 + 'px';
    box.style.left = doc.clientWidth/2 -box.clientWidth/2 + 'px';
    bg.style.height = body.scrollHeight + 'px';
    
    //绑定
    for(var key in btns) {
      (function(key){
        var a = document.createElement('a');
        a.href = 'javascript:void(0)';
        //a.style.width = key.length * 13 > 50 ? key.length * 13 : 50 + 'px';
        a.className = 'adaBtn';
        a.innerHTML = '<s></s>'+key;
        a.onclick = function(){
          btns[key].apply(this, arguments);
          return false;
        }
        footer.appendChild(a);
      })(key);  
    }
    close.onclick = function(){
      self.remove();
      return false;
    }
    
    //方法
    self.remove = function(){
      body.removeChild(wrap);
      for(var i = 0; i < selects.length; i++) {
        selects[i].style.display = 'block';
      }
    }

    //隐藏select
    var selects = document.getElementsByTagName('select');
    for(var i = 0; i < selects.length; i++) {
      selects[i].style.display = 'none';
    }
    
  }
  function diyCount5(xhr) {
    //计数
    //$$("#count5_div").innerHTML = "<img style=display:none src=http://count5.pconline.com.cn/newcount/count.php?channel=358&screen="+screen.width+"*"+screen.height+"&refer="+encodeURIComponent(document.referrer)+"&anticache="+new Date().getTime()+"&url="+encodeURIComponent(location.href)+" >";
  }
  //配置填写不正确验证失败
  function failure(xhr) {
    eval("var jsonText =" + xhr.responseText);
    //alert(jsonText.message);
    return false;
  }
  //配置填写验证通过
  function success(xhr) {
    eval("var jsonText =(" + xhr + ")");
    if(jsonText.result != "failure") {
      diyCount5(xhr);
    } else {
      window.setTimeout(function(){alert(jsonText.message)},20);
      var tr = paper.dom.rows[page.currentType+1], ts = $$("textarea",tr);
      ts[0].value = jsonText.oldBrand;
      //ts[0].blur();
      if(!isInteger(ts[1].value) || ts[1].value.length > 1) {//如果数量不是不是整数或位数大于1就设为之前的值
        ts[1].value = jsonText.oldNum;
        //ts[1].blur();       
      }
      if(!isInteger(ts[2].value) || ts[2].value.length > 6) {//如果价格不是整数或位数大于6就设为之前的值
        ts[2].value = jsonText.oldPrice;
        //ts[2].blur();
      }
    }
    return true;
  }
  //验证码
  function changeCaptcha() {
    document.getElementById("imgv").src = 'http://captcha.pconline.com.cn/captcha/v.jpg?' +new Date().getTime();
    return false;
  }
-->
</script>

<div class="col-a">
  <p class="config-list">配置清单</p>
  <p class="columns">
    <span  class="column1">配件名称</span>
                     <span  class="column2">品牌型号</span>
                     <span  class="column3">数量</span>
                     <span  class="column4">单价</span>
                     <span  class="column5">&nbsp;&nbsp;操作</span>
                 </p>
                 <table width="100%" border="0" cellspacing="0" cellpadding="0" class="info infoA" id="paper">
                     <tbody>
            
      
      <tr pjname="cpu"  type="0"  class="current" >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        CPU<span class="star red">*</span>
                        <input type="hidden" value="" id="pid1" name="pid1"/>
             <input type="hidden" value="" id="purl1" name="url1"/>
             <input type="hidden" value="" id="picUrl1" name="picUrl1"/>
             <input type="hidden" id="sessionName1" name="sessionName1" value="cpu"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name1" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_0" name="num1"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_0" name="price1"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="mainboard"  type="1"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        主板<span class="star red">*</span>
                        <input type="hidden" value="" id="pid2" name="pid2"/>
             <input type="hidden" value="" id="purl2" name="url2"/>
             <input type="hidden" value="" id="picUrl2" name="picUrl2"/>
             <input type="hidden" id="sessionName2" name="sessionName2" value="mainboard"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name2" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_1" name="num2"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_1" name="price2"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="memory"  type="2"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        内存<span class="star red">*</span>
                        <input type="hidden" value="" id="pid3" name="pid3"/>
             <input type="hidden" value="" id="purl3" name="url3"/>
             <input type="hidden" value="" id="picUrl3" name="picUrl3"/>
             <input type="hidden" id="sessionName3" name="sessionName3" value="memory"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name3" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_2" name="num3"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_2" name="price3"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="hd"  type="3"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        机械硬盘
                        <input type="hidden" value="" id="pid4" name="pid4"/>
             <input type="hidden" value="" id="purl4" name="url4"/>
             <input type="hidden" value="" id="picUrl4" name="picUrl4"/>
             <input type="hidden" id="sessionName4" name="sessionName4" value="hd"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name4" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_3" name="num4"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_3" name="price4"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="floppy"  type="4"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        固态硬盘
                        <input type="hidden" value="" id="pid5" name="pid5"/>
             <input type="hidden" value="" id="purl5" name="url5"/>
             <input type="hidden" value="" id="picUrl5" name="picUrl5"/>
             <input type="hidden" id="sessionName5" name="sessionName5" value="floppy"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name5" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_4" name="num5"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_4" name="price5"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="vision"  type="5"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        显卡
                        <input type="hidden" value="" id="pid6" name="pid6"/>
             <input type="hidden" value="" id="purl6" name="url6"/>
             <input type="hidden" value="" id="picUrl6" name="picUrl6"/>
             <input type="hidden" id="sessionName6" name="sessionName6" value="vision"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name6" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_5" name="num6"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_5" name="price6"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="machine_box"  type="6"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        机箱
                        <input type="hidden" value="" id="pid7" name="pid7"/>
             <input type="hidden" value="" id="purl7" name="url7"/>
             <input type="hidden" value="" id="picUrl7" name="picUrl7"/>
             <input type="hidden" id="sessionName7" name="sessionName7" value="machine_box"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name7" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_6" name="num7"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_6" name="price7"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="power"  type="7"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        电源
                        <input type="hidden" value="" id="pid8" name="pid8"/>
             <input type="hidden" value="" id="purl8" name="url8"/>
             <input type="hidden" value="" id="picUrl8" name="picUrl8"/>
             <input type="hidden" id="sessionName8" name="sessionName8" value="power"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name8" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_7" name="num8"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_7" name="price8"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="display"  type="8"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        显示器
                        <input type="hidden" value="" id="pid9" name="pid9"/>
             <input type="hidden" value="" id="purl9" name="url9"/>
             <input type="hidden" value="" id="picUrl9" name="picUrl9"/>
             <input type="hidden" id="sessionName9" name="sessionName9" value="display"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name9" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_8" name="num9"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_8" name="price9"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="keymouse"  type="9"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        键鼠套装
                        <input type="hidden" value="" id="pid10" name="pid10"/>
             <input type="hidden" value="" id="purl10" name="url10"/>
             <input type="hidden" value="" id="picUrl10" name="picUrl10"/>
             <input type="hidden" id="sessionName10" name="sessionName10" value="keymouse"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name10" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_9" name="num10"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_9" name="price10"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="keyboard"  type="10"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        键盘
                        <input type="hidden" value="" id="pid11" name="pid11"/>
             <input type="hidden" value="" id="purl11" name="url11"/>
             <input type="hidden" value="" id="picUrl11" name="picUrl11"/>
             <input type="hidden" id="sessionName11" name="sessionName11" value="keyboard"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name11" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_10" name="num11"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_10" name="price11"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="mouse"  type="11"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        鼠标
                        <input type="hidden" value="" id="pid12" name="pid12"/>
             <input type="hidden" value="" id="purl12" name="url12"/>
             <input type="hidden" value="" id="picUrl12" name="picUrl12"/>
             <input type="hidden" id="sessionName12" name="sessionName12" value="mouse"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name12" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_11" name="num12"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_11" name="price12"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="SoundBox"  type="12"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        音箱
                        <input type="hidden" value="" id="pid13" name="pid13"/>
             <input type="hidden" value="" id="purl13" name="url13"/>
             <input type="hidden" value="" id="picUrl13" name="picUrl13"/>
             <input type="hidden" id="sessionName13" name="sessionName13" value="SoundBox"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name13" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_12" name="num13"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_12" name="price13"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="cpuFeng"  type="13"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        散热器
                        <input type="hidden" value="" id="pid14" name="pid14"/>
             <input type="hidden" value="" id="purl14" name="url14"/>
             <input type="hidden" value="" id="picUrl14" name="picUrl14"/>
             <input type="hidden" id="sessionName14" name="sessionName14" value="cpuFeng"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name14" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_13" name="num14"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_13" name="price14"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="voice"  type="14"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        声卡
                        <input type="hidden" value="" id="pid15" name="pid15"/>
             <input type="hidden" value="" id="purl15" name="url15"/>
             <input type="hidden" value="" id="picUrl15" name="picUrl15"/>
             <input type="hidden" id="sessionName15" name="sessionName15" value="voice"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name15" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_14" name="num15"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_14" name="price15"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="cdroom"  type="15"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        光驱
                        <input type="hidden" value="" id="pid16" name="pid16"/>
             <input type="hidden" value="" id="purl16" name="url16"/>
             <input type="hidden" value="" id="picUrl16" name="picUrl16"/>
             <input type="hidden" id="sessionName16" name="sessionName16" value="cdroom"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name16" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_15" name="num16"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_15" name="price16"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
      <tr pjname="earphone"  type="16"  >
                <td class="loccupy" width="10px"></td>
                    <td width="16%"class="cap">
                        耳机
                        <input type="hidden" value="" id="pid17" name="pid17"/>
             <input type="hidden" value="" id="purl17" name="url17"/>
             <input type="hidden" value="" id="picUrl17" name="picUrl17"/>
             <input type="hidden" id="sessionName17" name="sessionName17" value="earphone"/>
                    </td>
                    <td width="36%" >
                        <textarea title="品牌型号最多可输入20个字~!" class="name" name="name17" maxlength="20"></textarea>
                    </td>
                    <td width="13%">
                        <textarea readonly="readonly" class="num" id="num_16" name="num17"></textarea>
                    </td>
                    <td width="16%">
                        <textarea title="价格最大999999~!" class="price" id="price_16" name="price17"></textarea>
                    </td>
                    <td width="14%">
                        <a class="remove" href="#" target="_self" title="移除"></a>
                    </td>
                    <td class="roccupy" width="10px"><i class="rtriangle"></i></td>
            </tr>
      
      
          </tbody>
                  <tfoot>
                <tr>
                  <td colspan="6">价格总计：<strong class="red">￥</strong><span class="final" id="domTotalPrice">0</span>
                  <input type="hidden" name="totalPrice" id="inputTotalPrice" value="0"/></td>
                </tr>
              </tfoot>
             </table>
             
             <form autocomplete="off" action="submitdiy.jsp" method="post" onsubmit="return submitCheck()" id="formPaper" target="indexIframe" name="formPaper">
            <input type="hidden" id="opr" name="opr" value="add">
        <input type="hidden" name="blue_PrintID" value="">
            <div class="addition">
              <dl class="mold" id="xzfa">
                  <dt class="cap">配置类型：</dt>
                  <dd>
                  <span>
                      
                <i data-id="1" class="select">家用娱乐方案</i>
              
                <i data-id="2" class="">校园学子方案</i>
              
                <i data-id="8" class="">游戏发烧方案</i>
              
                <i data-id="13" class="">商用办公方案</i>
              
                <i data-id="19" class="">专业设计方案</i>
              
                <i data-id="21" class="">顶级豪华方案</i>
              
              <input name="DiyType" type="hidden" value="1" id="DiyType" />
                         
                       <script type="text/javascript">
                //配置类型 点击用的js
                          if(document.getElementById("xzfa").getElementsByTagName("i")){
                  var x_si=document.getElementById("xzfa").getElementsByTagName("i");
                  var x_dt=document.getElementById("DiyType");
                  var x_pobg=x_si[0];
                  var x_sinn=x_si.length;
                  for(var i=0;i<x_sinn;i++){
                    if(x_si[i].className=="select"){
                      x_pobg=x_si[i];
                    }
                    x_si[i].onclick=function(){
                      x_pobg.className="";
                      this.className="select";
                      x_dt.value=this.getAttribute("data-id");
                      x_pobg=this;
                    }
                  }
                }
                        </script>
                        
                    </span>
                  </dd>                   
          </dl>
          <dl class="title">
            <dt class="cap">配置名称：</dt>
            <dd><input type="text" title="标题~最多可以输入100个字~" id="DiyTitle" name="DiyTitle" value="" maxlength="100" ></dd>
          </dl>
          <dl class="des">
            <dt class="cap">配置说明：</dt>
            <dd><textarea id="DiyComment" title="装机方案描述~最多可以输入1000个字~" name="DiyComment" maxlength="1000"></textarea></dd>
          </dl>
          <dl class="veri">
            <dt class="cap">验证码：</dt>
            <dd>
              <input id="captcha" name="captcha" class="yzm" size="9" autocomplete="off">
              <img width="100" height="30" id="imgv" src="http://captcha.pconline.com.cn/captcha/v.jpg" class="yzmpic"> 
              <a href="javascript:void(0)" onclick="return changeCaptcha();">看不清？换一张</a>
            </dd>
          </dl>
          <dl style="display: none;">
            <dt class="cap">&nbsp;</dt>
            <label for="chkpublish"><input type="checkbox" checked="checked" id="chkpublish" name="chkpublish" onclick="setCookie('isPublish',this.checked);">是否发布到论坛</label>
          </dl>
        </div>
        <div style="display:none;" id="hiddenContent">
        
        </div>
        <p class="fuc">
          <input type="submit" value="提交方案" class="yellow">
          <input type="button" id="submitBtn" value="预览方案" class="blue" onclick="previewCheck();">
        </p>
        <input type="hidden" name="screenSta" value="">
      </form>
      
      <script type="text/javascript">
        if (null == getCookie('isPublish') || '' == getCookie('isPublish') || 'true' == getCookie('isPublish') || 'checked' == getCookie('isPublish')){
          document.getElementById('chkpublish').checked = true;
          setCookie('isPublish','true');
        }
      </script>
</div>
<iframe style="display: none;" name="indexIframe" id="indexIframe">
</iframe>
<script>
function JsonToString(o) {    
    var arr = []; 
    var fmt = function(s) { 
        if (typeof s == 'object' && s != null) return JsonToStr(s); 
        return /^(string|number)$/.test(typeof s) ? "'" + s + "'" : s; 
    } 
    for (var i in o) 
         arr.push("'" + i + "':" + fmt(o[i])); 
    return '{' + arr.join(',') + '}'; 
}


function contentPay(){
  $("#hiddenContent").html("");
  $("#paper tr").each(function(){
    var json = {};
    var session;
    var n = $(this).attr("pjname");
    var tmpStr;
    $(this).find("input").each(function(){
      if( $(this).attr("name").indexOf("sessionName") != -1 ){
         tmpStr = "<input type='hidden' name='"+ $(this).attr("name") +"' value='" + $(this).val() + "' /> ";
        $("#hiddenContent").append(tmpStr).append("\n");
      }
      eval( "json." + $(this).attr("name") + "='" + encodeURIComponent ($(this).val()) + "'" )
    });
    $(this).find("textarea").each(function(){
      eval( "json." + $(this).attr("name") + "='" + encodeURIComponent( $(this).val()) + "'")
      //tmpStr = "<input type='hidden' name='"+ $(this).attr("name") +"' value='" + $(this).val() + "' /> ";
      //$("#hiddenContent").append(tmpStr).append("\n");  
    });
    tmpStr = "<input type='hidden' name='"+ n +"' value=\"" + encodeURIComponent(JsonToString(json)) + "\" /> ";
    $("#hiddenContent").append(tmpStr).append("\n");
    
  });
  //console.log( $("#hiddenContent").html() );
}

</script>

      
          <div class="col-b">
          
            
            <div class="contentlist" style="display:block">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
            
            <div class="contentlist">
            
            
              <div class="filter">
                <div class="filter-content">
                  <div class="filter-head">
                    <span class="condition">cpu筛选条件</span>
                    <span class="search">
                              <input onkeypress="if(event.keyCode == 13)enterSearch();" type="text" class="text" name="product_query" placeholder="请输入品牌或型号">
                              <input id="searchBtn" type="button" name="search" class="search-bnt" value="">
                            </span>
                        </div>
                        <div class="filter-body clearfix">
                   
                </div>
                </div>
              </div>
              <div class="productList">
                <div class="productList-head">
                  <span class="mark pListHead">产品列表</span>
                  <div class="submark">
                      <span class="type" id="">
                          <a href="#" type="1" class="selected">最热</a>
                          <a href="#" type="5" class="">最新</a>
                          <a href="#" type="4" class="">最便宜</a>
                          <a href="#" type="3" class="">最贵</a>
                          <a href="#" type="9" class="last">最高推荐</a>
                      </span>
                  </div>
              </div>
              <ul class="pic-txt-list">
              </ul>
              </div>
            </div>
          
          
          </div> 
      </div>
    </div>
    
    <!-- 通栏2 -->

        </div>
      </div>  
    </div>
  </div>
  <!-- /wraper -->
</div>
<div class="pick" id="pick"></div>
<div id="sbk">
  <i class="ttriangle"></i>
  <a href="javascript:void(0)">1</a>
    <a href="javascript:void(0)">2</a>
    <a href="javascript:void(0)">3</a>
    <a href="javascript:void(0)">4</a>
    <a href="javascript:void(0)">5</a>
    <a href="javascript:void(0)">6</a>
    <a href="javascript:void(0)">7</a>
    <a href="javascript:void(0)">8</a>
    <a href="javascript:void(0)">9</a>
</div>





<script src="http://js.3conline.com/min/temp/v1/lib-jquery1.4.2,dpl-jquery.slide.js" charset="GBK"></script>
<script type="text/javascript">

//产生随机id
var chars = ['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
function generateMixed(n) {
     var res = "";
     for(var i = 0; i < n ; i ++) {
         var id = Math.ceil(Math.random()*35);
         res += chars[id];
     }
     return res;
}

//全局对象
var page = {
  smallTypeIds: ["20812","20811","20813","20814","42997","20817","20872","20881","20950","30129","20873","20820","20848","20973","20818","20874","20990"],//小类ID
  typeList: ["cpu","mainboard","memory","hd","floppy","vision","machine_box","power","display","keymouse","keyboard","mouse","SoundBox","cpuFeng","voice","keluji","eji"],
  nameList: ["CPU","主板","内存","机械硬盘","固态硬盘","显卡","机箱","电源","显示器","键鼠套装","键盘","鼠标","音箱","散热器","声卡","光驱","耳机"],
  brandList: [],//品牌
  criteriaList: [],//自定义查询
  productList: [],//产品
  pickedList: [],
  currentType:0,
  editDelay: 500, //ms
  changeType: function(i){
    page.currentType = i;
    filter.condition = {
      sId: page.smallTypeIds[i],  //小类ID
      bId: "",    //品牌
      title: "",
      criId0: "",//查询器
      criId1: "",//查询器
      criId2: "",//查询器 
      pCriId: "",  
      areaId: $("#selected_area").value,
      summaryLen: "65",
      pageNo: "1",
      pageSize: "7",
      order: "1"
    };
  },
  
  init: function(){
    var f = filter;
    f.attachSearchBtn();//搜索框
    paper.init();
    paper.attachEvt();//表单验证
  }
}

//选用状态数组
var choices=['','','','','','','','','','','','','','','','',''];

//主切换
var tocs = $('#paginate-picker .toc'),
    cnts = $('#Jwrap .contentlist'),
    Trs  = $('#paper tbody tr');
window.tab1 = new Slide({
    target: cnts,
    control:tocs,
    type: 'click',
    onchange: function(){ 
      $(Trs[this.curPage]).addClass("current").siblings().removeClass("current");

        window.setTimeout(function(){

          page.changeType($("#paginate-picker .current").attr("type"));
          $('span.condition').html(page.nameList[page.currentType]+"筛选条件");
        /*
          if (cnts.eq(page.currentType).find(".filter-body").children().length == 0 && cnts.eq(page.currentType).find(".pic-txt-list").children().length == 0) {
          //加载筛选条件
          var script = document.createElement('script');
          script.src = "http://product.pconline.com.cn/intf/_cri_json_utf8.jsp?sId="+page.smallTypeIds[page.currentType]+"&callback=filter.fillFilter";
          script.charset = "utf-8";
          document.body.insertBefore(script,document.body.firstChild);

          //加载产品列表
          filter.condition.sId=page.smallTypeIds[page.currentType];
          filter.load(page.currentType);
        }
        */
          if(!cnts.eq(page.currentType).attr('filterloaded')){
            //加载筛选条件
            var script = document.createElement('script');
            script.src = "http://product.pconline.com.cn/intf/_cri_json_utf8.jsp?sId="+page.smallTypeIds[page.currentType]+"&callback=filter.fillFilter";
            script.charset = "utf-8";
            document.body.insertBefore(script,document.body.firstChild);
          }

          if(!cnts.eq(page.currentType).attr('searchloaded')){
            //加载产品列表
            filter.condition.sId=page.smallTypeIds[page.currentType];
            filter.load(page.currentType);
          }
      },0);

    }
}); 
Trs.each(function(i,elem){
  $(elem).bind('click',function(){
    tab1.playTo(i);
    });
});

//配件筛选器
filter = {
  wrap:$(".productList .pic-txt-list"),
  condition: {
    sId: "20812", //CPU
    title: "",    //名称
    bId: "",    //品牌
    pCriId: "",   //价格
    criId0: "",   //查询器
    criId1: "",   //查询器
    criId2: "",   //查询器
    areaId: $("#selected_area").value,  //地区
    summaryLen: "50",//描述
    pageNo: "1",  //当前页
    pageSize: "7",  //每页记录数
    order: "1"    //排序
  },
  fillFilter : function(criterias) {
    criterias = criterias.result;
    page.criteriaList = criterias;
    var html = '';

    /******* 筛选条件--品牌 ********/
    /*console.log( "当前类型currentType=" + page.currentType );*/
    $('span.condition').html(page.nameList[page.currentType]+"筛选条件");
    var brands = criterias["品牌"];
    var ppsl=6;
    if(typeof brands != "undefined" && brands !=null ) {
        page.brandList = brands;
        var ntype=generateMixed(5);
      html += '<div class="brand"><div class="brand-wrap clearfix"><span class="brand-classify">品牌：</span><span class="more" id="more'+ntype+'"><div class="brand-detail"><em class="rtriangle"></em><span class="first-line-bg"></span><span class="brand-all">';
      //全部品牌
      html += '<a class="current" href="#null" name="brandcri" class="" target="_self" onclick="filter.criteriasearch(\'brand\', \'-1\');elementSelectCls(this,\'current\',\'brandcri\');">不限</a>';
      for(var key in brands) {
          var brand = brands[key];
          html += '<a href="#null" name="brandcri" class="" target="_self" onclick="filter.criteriasearch(\'brand\', \'' + brand.id + '\');elementSelectCls(this,\'current\',\'brandcri\');">' + brand.name + '</a>';
      }
      html += '</span></div>';
      if(brands.length > ppsl) {
        html += '<a href="javascript:void(0);" target="_self" id="btnMore'+ntype+'" onmouseover= "addActiveClass(\''+ntype+'\')" onmouseout= "removeActiveClass(\''+ntype+'\')">更多</a>';
      }
      html +='</span></div></div>';
    }
    /******筛选条件--自定义 *********/
    var counter = 1;
    var dis = 0;
    for(var key in criterias) {
      if(key == '品牌') {
        continue;
      }
      if(counter <= 4) {
        var cris = criterias[key];
        var type = '';
        if('价格'==key ) {
          type =  'price';
        } else {
          type = 'criteria'+dis;
          dis++;          
        }
        var nntype=type+generateMixed(5);
        html += '<div class="brand"><div class="brand-wrap clearfix"><span class="brand-classify">'+key+'：</span><span class="more" id="more'+nntype+'"><div class="brand-detail"><em class="rtriangle"></em><span class="first-line-bg"></span><span class="brand-all">';
        html += '<a class="current" href="#null" name="'+nntype+'" class="" target="_self" onclick="filter.criteriasearch(\'' + type + '\',  \' -1\' );elementSelectCls(this,\'current\',\''+nntype+'\');">不限</a>';
        for(var kk in cris) {
          var cri = cris[kk];
          html += '<a href="#null" name="'+nntype+'" class="" title="'+cri.name+'" target="_self" onclick="filter.criteriasearch(\'' + type + '\', '+ cri.criId + ' );elementSelectCls(this,\'current\',\''+nntype+'\');">' + cri.name + '</a>';
        }
        html += '</span></div>';
        if(cris.length >6) {
          html += '<a href="javascript:void(0);" target="_self" id="btnMore'+nntype+'" onmouseover= "addActiveClass(\''+nntype+'\')" onmouseout= "removeActiveClass(\''+nntype+'\')">更多</a>';
        }
        html +='</span></div></div>';
      }
      counter++;
    }
    $('.filter-body').eq(page.currentType).html(html);
    cnts.eq(page.currentType).attr('filterloaded',true);
  },
  load: function(pars){
    filter.wrap.eq(pars).html('<li class="load loading">数据加载中…</li>');
    filter.search(filter.condition);//加载产品列表
  },
  search: function(condition) {//查询方法
    filter.wrap.eq(page.currentType).innerHTML = '<li class="load loading">数据加载中…</li>';
    var sId = condition.sId || "20812", //CPU
      bId = condition.bId || "",    //品牌
      title = condition.title || "",  //名称
      criId0 = condition.criId0 || "",//查询器
      criId1 = condition.criId1 || "",//查询器
      criId2 = condition.criId2 || "",//查询器
      pCriId = condition.pCriId || "",  
      areaId = condition.areaId || "1",
      summaryLen = condition.summaryLen || "50",
      pageNo = condition.pageNo || "1",
      pageSize = condition.pageSize || "7",
      order = condition.order || "1";
    var src = "http://product.pconline.com.cn/intf/_search_json.jsp?&refresh=true&callback=filter.callback&charset=utf8";
    var params = "&sId="+sId; 
    params += "&bId="+bId;
    params += "&keyword="+escape(title);
    params += "&pcId="+pCriId;
    params += "&cId="+criId0;
    params += "&cId="+criId1;
    params += "&cId="+criId2;     
    params += "&areaId="+areaId;
    params += "&summaryLen="+summaryLen;
    params += "&pageNo="+pageNo;
    params += "&pageSize="+pageSize;
    params += "&order="+order;
    src += params;
    var script = document.createElement('script');
    script.src = src;
    script.charset = "utf-8";
    document.body.insertBefore(script,document.body.firstChild);
  },
  callback: function(data){
    filter.fill(data);
    filter.attachItemEvt();//初始化 选用按钮
  },
  fill: function(data){
    var total = parseInt(data["total"]);
    var pageCount = parseInt(data["pageCount"]);
    var pageSize = parseInt(data["pageSize"]);
    var pageNo = parseInt(data["pageNo"]);
    //产品列表
    //page.productList = data["data"];
    var products = data["data"];
    
    var pageHtml = '<li class="last"><div class="pages pconline_page">';

    var end = pageNo < 3 ? 3 : pageNo + 1;
    var start = 1;
    end = end > pageCount ? pageCount : end;
    start = pageNo - (2 - (end - pageNo));
    start = start < 1 ? 1 : start;
    if(pageCount >= 3) {
      if(start+1 >= 3 && pageNo != 1) {
        pageHtml += '<a href="#null" target="_self" onclick="filter.criteriasearch(\'pageNo\', \'1\');">1</a>';
        pageHtml += '<span>...</span>';
      }
    }
    for(i = start; i <= end; i++) { 
      if(i == pageNo) {
        pageHtml += '<a href="#null" target="_self" class="selected" >' + i + '</a>';       
      } else {
        pageHtml += '<a href="#null" target="_self" onclick="filter.criteriasearch(\'pageNo\', \'' + i + '\');">' + i + '</a>';
      }
    }
    if(pageCount >= 3 && end != pageCount) {
      pageHtml += '<span>...</span>';
      pageHtml += '<a href="#null" target="_self" onclick="filter.criteriasearch(\'pageNo\', \'' + pageCount + '\');">' + pageCount + '</a>';
    }
    if(pageCount && pageNo != pageCount) {
      pageHtml += '<a href="#null" target="_self" class="next" onclick="filter.criteriasearch(\'nextPage\', \'\');">下一页</a>';
    } else {
      pageHtml +='';
    }
    
    pageHtml += '</div></li>';
    
    var len =7, pages = len % 7;
    var lis = "", per = 7;
    for(var key in products) {
      var product = products[key];

      lis += '<li pid="' + product.id + '" purl="' + product.url + '" picurl="' + product.idx2Pic + '" class="pic-txt clearfix">';
      lis += '<a target="_blank" href="'+ product.url +'" class="img" onmouseover="hopic(this)" onmouseout="hdpic(this)"><img src="' + product.idxPic +'"  data-rel="' + product.idx1Pic +'" /></a>';
      lis += '<dl class="mid">';
      lis += '<dt><a target="_blank" href="'+ product.url + '" class="title">' + product.shortName + '</a></dt><dd class="h46">';
      if(product.summary.indexOf("|")!=-1){
        var strs=product.summary.replace('...','');
              strs=strs.split("|");
        var strsn=strs.length;
        for(var my=0;my<strsn;my++){
          if(my>4){
            break; 
          }else{
            if(strs[my]){
              lis += ' <i>';
              if(strs[my].indexOf(":")!=-1){
                var nstrs=strs[my].split(":");
                lis +='<em>'+nstrs[0]+':</em>';
                lis +=strs[my].replace(nstrs[0]+':','');
              }else{
                lis +=strs[my];
              }
              lis += ' </i>';
            }
          }
        }

      }
      lis += '</dd><dd><a target="_blank" href="' + product.detailUrl + '" target="_blank" class="mcs">更多参数&gt;&gt;</a></dd>';
      lis += '</dl>';
      lis += '<div class="rig">';
      lis += '<i class="price">' + (isNaN(product.price)?'':'￥') +''+ product.price + '</i>';
      lis += '<a href="javascript:void(0)" target="_self" class="sGray choice">选用</a>';
      lis += '</div>';
      lis += '</li>';
    }
    lis += pageHtml;
    if(lis=='<li class="last"><div class="pages pconline_page"></div></li>'){
      lis += '<li class="load">查无相关结果</li>';
    } 
    filter.wrap.eq(page.currentType).parent().find(".pListHead").html('已找到的'+page.nameList[page.currentType]+"<em>（"+total+"个）</em>");
    filter.wrap.eq(page.currentType).html(lis);
    cnts.eq(page.currentType).attr('searchloaded',true);
    
    
    //显示产品选用状态
    var choiceLi=filter.wrap.eq(page.currentType).find("li");
    for (var i =0;i<filter.wrap.length;i++) {
      if (choiceLi.eq(i).attr("pid")== choices[page.currentType]) {
        choiceLi.eq(i).find(".sGray").addClass("choosed").html("已选用");
      }                  
    }

  },
  criteriasearch : function(type,param) {     //筛选条件查询
    var queryInputs = document.getElementsByName("product_query");
    if(type != 'prePage' && type != 'nextPage' && type != 'pageNo' && type != 'order') {
      filter.condition.title = "";
      if(queryInputs) {
        var len = queryInputs.length;
        for(var i = 0; i < len; i++){
          queryInputs[i].value = "";
        }
      }
    }
    
    if(type == "area") {//品牌
      filter.condition.areaId = param;
    }
    if(type == "brand") {//品牌
      filter.condition.bId = param;
    }
    if(type == "price") {//价格
      filter.condition.pCriId = param;  
    }
    if(type == "criteria0") {//查询器
      filter.condition.criId0 = param;
    }
    if(type == "criteria1") {//查询器
      filter.condition.criId1 = param;
    }
    if(type == "criteria2") {//查询器
      filter.condition.criId2 = param;
       
    }
    if(type == "prePage") {//prePage
      filter.condition.pageNo = parseInt(filter.condition.pageNo) - 1;
    }
    if(type == "nextPage") {//nextPage
      filter.condition.pageNo = parseInt(filter.condition.pageNo) + 1;
    }
    if(type == "pageNo") {//pageNo
      filter.condition.pageNo = param;
    } else if(type != "prePage" && type != "nextPage") {
      filter.condition.pageNo = "1";
    }
    if(type == "order") {//排序
      filter.condition.order = param;
    }
    filter.search(filter.condition);//查询产品

    if(type == 'prePage' || type == 'nextPage' || type == 'pageNo' || type == 'order') {//最xx产品列表，固定在右上方
      window.scrollTo(0,$('.productList')[page.currentType].offsetTop);
    }
  },
  keywrodSearch : function(keyword) {//关键字查询
    if(!keyword) {
      alert("请输入关键字！");
      return;
    }
    filter.condition = {
      sId: page.smallTypeIds[page.currentType], //小类ID
      bId: "",    //品牌
      title: keyword,
      criId0: "",//查询器
      criId1: "",//查询器
      criId2: "",//查询器 
      pCriId: "",  
      areaId:$("#selected_area").value,
      summaryLen: "50",
      pageNo: "1",
      pageSize: "7",
      order: "1"
    };
    var searchDivs = $(".filter-body");
    var brands = searchDivs.eq(page.currentType).find("a.current");//选中的品牌
    for(var i = 0; i < brands.length; i++){ //清除条件
      var cl = brands[i].className;
      if(cl) {
        brands[i].className = cl.replace(/current/gi,'');
      } else {
        brands[i].className = "";
      }
    } 
    filter.search(filter.condition);//查询产品
  },
  attachItemEvt: function(){ //选用
    list = $(".pic-txt-list").eq(page.currentType).find("li");
    //遍历除翻页的li
    for(var i=0; i<list.length-1; i++) 
    //闭包保留i值
    (function(i){

      if($(".pic-txt-list").eq(page.currentType).find("li").eq(i).find(".sGray")){
        var btn =list.eq(i).find(".sGray"), 
          title = list.eq(i).find(".title").html(),
          id = list.eq(i).attr("pid");
          if (list.eq(i).find(".price").html()!=null) {
            //console.log(list.eq(i).find(".price").html());
            var price = list.eq(i).find(".price").html().slice(1);
          }else{
            var price ="";
          }       
          
        btn.click(function(){//点击选用
          listTemp = $(".pic-txt-list").eq(page.currentType).find("li");
          var currType = parseInt( page.currentType );
          var sessionName = $("#sessionName"+(currType+1)).attr("value");
          var areaId = $("#selected_area").attr("value");
          var purl = listTemp.eq(i).attr("purl");
          var picurl = listTemp.eq(i).attr("picurl");
          $("#purl"+(currType+1)).attr("value", purl);//产品URL
          $("#picUrl"+(currType+1)).attr("value", picurl);//产品URL
          
          if(isNaN(price)) {
            price = 0;
            paper.products[page.currentType].fill(title,"1",price,id);
            $("a.remove")[page.currentType].style.visibility="visible";
            
            alert("您所选的是新品，请手动输入价格！");
            $("#paper tbody tr").eq(page.currentType).find("textarea").eq(2).addClass("focus").focus();

            $(this).html("已选用");
            $(this).addClass("choosed").parent().parent().siblings().find(".sGray").removeClass("choosed").html("选用");

            //保存当前产品的选用状态
            choices[page.currentType]=$(this).parent().parent().attr("pid");
            return false;

          } else {
            
            paper.products[page.currentType].fill(title,"1",price,id);
            $("a.remove")[page.currentType].style.visibility="visible";
          }
          $(this).html("已选用");
          $(this).addClass("choosed").parent().parent().siblings().find(".sGray").removeClass("choosed").html("选用");

          //保存当前产品的选用状态
          choices[page.currentType]=$(this).parent().parent().attr("pid");
          
          var data = "varName="+escape(sessionName)+"&areaID="+areaId+"&nAction=1&varPrice="+escape(price)+"&varModel="+encodeURI(encodeURIComponent(replaceDangerCode(title)))+"&productId="+id+"&url="+encodeURIComponent(purl)+"&picUrl="+encodeURIComponent(picurl);
          selectSaveConfig(page.currentType,data);
        });
      }
    })(i);
  },
  attachSearchBtn: function() { //搜索框
    var keywordSearchBtn = document.getElementsByName("search");
    for(var i = 0; i < keywordSearchBtn.length; i++) {
      keywordSearchBtn[i].onclick = function() {
        filter.keywrodSearch(document.getElementsByName("product_query")[page.currentType].value);
        window.scrollTo(0,$('.productList')[page.currentType].offsetTop);
      };
    }
  }
}

//配置单
var paper = {
  dom: $("#paper tbody"),
  //计算总价
  countPrice: function(){
    var domPrices=$("#paper .price"),
    domNums = $("#paper .num"),
      len = domPrices.length, total = 0;
    for(var i=0; i<len; i++) {
      total += domNums[i].value * domPrices[i].value;
      //console.log(total)
    }
    $("#domTotalPrice").html(total);
  },
  //单次调整
  adjustPrice: function(value){
    var oldValue = $("#domTotalPrice").html()|0;
    $("#domTotalPrice").html(oldValue + value);
  },
  attachEvt: function(){
    //提交配置单
    $("#formPaper").onsubmit = function(e){
      $("#inputTotalPrice").value = $("#domTotalPrice").html;
      //验证
      return submitCheck();
      
    }
  },
  //初始化配置单
  init: function(){
    var trs = $("#paper tbody tr");
    for(var i=0; i<trs.length; i++) {
      var o = paper.products[i] = new Product(trs[i]);
      o.attach(i);
      if(trs[i].getElementsByTagName("textarea")[0].value) {
        $("a.remove")[i].style.visibility = "visible";
      }
    }
  },
  //存储产品对象
  products: []
};

//产品对象构造器
Product = function(o){
  var childs = o.getElementsByTagName("textarea");
  
  this.name = childs[0];
  this.num = childs[1];
  this.price = childs[2];
  this.id = o.getElementsByTagName("input")[0];
  this.dom = o;
  this.fill = function(name,num,price,id){
    var prePrice = this.price.value;
    this.name.value = name; //产品名称
    this.num.value = num;//数量
    this.price.value = price; //价格
    this.id.value = id; //产品ID
    paper.countPrice(); //价格波动=单价波动*数量
  },
  this.remove = function(){
    
    //paper.adjustPrice(-this.price.value * this.num.value);
    this.name.value = ""; //产品名称
    this.price.value = ""; //价格
    this.num.value = ""; //数量
    this.id.value = ""; //产品ID
    
    paper.countPrice();
    
    removeConfig(parseInt(o.getAttribute("type"))+1);//从cookie中删除已选的配件
    
  },
  this.attach = function(i){
    var tr = this.dom, btnRemove =$(tr).find(".remove")[0], self = this;
    btnRemove.index=i;
    
    btnRemove.onclick = function(){
      var _this=this;
      self.remove();
      this.style.visibility="hidden";
      $(".pic-txt-list").eq(_this.index).find("li .sGray").removeClass("choosed").html("选用");
      return false
    }
    var t = $(tr).find("textarea");
    for(var i=0; i<t.length; i++) {
      (function(i){
        var o = t[i], timer, keyTimer, oldValue, isDomPrice=o.className.indexOf("price")!=-1, isDomNum=o.className.indexOf("num")!=-1,isDomName=o.className.indexOf("name")!=-1;

        o.onmouseout = function(){
          if(timer) window.clearTimeout(timer);
        };
        o.onfocus = function(){
          oldValue=this.value;
          if(this.className.indexOf("focus")==-1) this.className += " focus";
          
          //点击 配件行时,光标定位
          if (isDomPrice && t[0].value) {
            this.select();
          }else{
            t[0].select();
          }
          
  
        };
        o.onblur = function(){
          //移除样式
          var reg = new RegExp('(\\s|^)focus(\\s|$)');
          this.className=this.className.replace(reg,' ');
          //输入栏去掉值时，还原旧值
          if(this.value == "" || this.value == " " || this.value.trim() == ""
            || this.value.trim().indexOf("http://") != -1 || this.value.trim().indexOf("www.") != -1) {
            if(oldValue) {
              this.value = oldValue;
              //手动清除价格，失去焦点后重新计算总价
              paper.countPrice();
            } else {
              this.value = "";
            }
          }
          
          //手动新建配件
          if(isDomName) {           
            if (this.value){
              t[1].value=1;
              //手动改配置的时候，清空原来的产品信息链接
              if(oldValue && this.value && oldValue != this.value){
              var col = 1 + page.currentType;
              //console.log( (parseInt(page.currentType)+1));
              $("#pid"+(parseInt(page.currentType)+1)).val("");
              $("#purl"+(parseInt(page.currentType)+1)).val("");
              $("#picUrl"+(parseInt(page.currentType)+1)).val("");
              //console.log( $("#purl"+(parseInt(page.currentType)+1)).val() );
              }
              $("a.remove")[page.currentType].style.visibility="visible";
            }
            if(this.value.length > 20){
              this.value = this.value.substr(0,20);
            } 
          }
          //失去焦点时把数据保存到cookie中
          doSaveConfig(page.currentType,"manual");//diycookie.htm定义,manual:手动
           
        }
        if(isDomPrice || isDomNum) {            
          o.onchange = o.onkeyup = function(e){
            var maxLen = isDomPrice?6:1;
            if(keyTimer) window.clearTimeout(keyTimer);
            var v = this.value = this.value.replace(/^0+|[^\d]/g,'');
            if( !(page.currentType == 2 || page.currentType == 3 || page.currentType == 4  
                || page.currentType == 6 || page.currentType == 7 ) && isDomNum ) {
              this.value = 1;
            }
            if(v.length > maxLen) this.value = v.substr(0,maxLen);
            keyTimer = window.setTimeout(function(){o.blur()},2000);
            //更新总价
            paper.countPrice();   
          };
        }

      })(i);
    }
  }
}

page.init();

function enterSearch(){
  document.getElementById("searchBtn").click();
}

//筛选条件当前高亮
function elementSelectCls(obj,cls,name) { 
  var eles = document.getElementsByName(name);
  for(var i = 0; i < eles.length; i++) {
    var cl = eles[i].className;
    if(cl) {
      eles[i].className = cl.replace(/current/gi,'');
    } else {
      eles[i].className = "";
    }
  }
  obj.className = cls;
}

//显示更多筛选条件
function addActiveClass(brand) {
  $('#more'+brand).parent().parent().addClass("activeBrand");
  $('#more'+brand).find(".brand-detail").addClass("active");
}
function removeActiveClass(brand) {
  $('#more'+brand).bind('mouseover',function(){
    $(this).find(".brand-detail").addClass("active");
    $(this).parent().parent().addClass("activeBrand");
    }); 
  $('#more'+brand).bind('mouseout',function(){
    $(this).find(".brand-detail").removeClass("active");
    $(this).parent().parent().removeClass("activeBrand");
    });
}

//最xx 切换
$(".productList .submark a").each(function(i,elem){ 
  $(elem).bind('click',function(){
    filter.criteriasearch('order',$(this).attr("type"));
    $(this).addClass('selected').siblings().removeClass('selected');
    return false;
    });    
});

function hopic(str){
  var pick = document.getElementById("pick");
  pick.style.display="block";
  var npic=str.getElementsByTagName("img")[0];
  str.rel=npic.src;
  npic.src=npic.getAttribute("data-rel");
  pick.innerHTML='<i class="ltriangle"></i>'+str.innerHTML;
  npic.src = str.rel;
  var Left=str.offsetParent?(str.offsetLeft+str.offsetParent.offsetLeft):str.offsetLeft;
  var Top=str.offsetParent?(str.offsetTop+str.offsetParent.offsetTop):str.offsetTop;
  pick.style.left=(Left+105)+"px";
  pick.style.top=(Top-10)+"px";
}
function hdpic(str){
  var pick = document.getElementById("pick");
  var npic=str.getElementsByTagName("img")[0];
  npic.src=str.rel;
  pick.style.display="none";
  pick.innerHTML="";
}

//数字键弹窗
(function(){
  if(document.getElementById("paper").getElementsByTagName("textarea")){
    var fta=document.getElementById("paper").getElementsByTagName("textarea");
    var ftan=fta.length;
    var sbk=document.getElementById("sbk")
    var sbka=sbk.getElementsByTagName("a");
    for(var i=0;i<ftan;i++){
      fta[i].index=i;
      fta[i].onclick=function(e){
        if(this.className.indexOf('num')!=-1){
          if(fta[this.index-1].value!=''){
            if(fta[parseInt(this.index+1)].value!=''){
              if(this.id=='num_2' || this.id=='num_3' || this.id=='num_4' || this.id=='num_5' || this.id=='num_10'){
                tab1.playTo($(this).parent().parent().attr("type"));
                sbk.lang = this.index;
                sbk.style.display="block";
                var oscrollTop = document.documentElement.scrollTop || document.body.scrollTop; 
                sbk.style.left=parseInt(this.getBoundingClientRect().left+document.documentElement.scrollLeft-20)+'px';
                sbk.style.top=parseInt(this.getBoundingClientRect().top+oscrollTop+32)+'px';
                e = e || window.event;
                return e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;
              }
            }
          }
          
        }
      }
    }
    var sbkan=sbka.length;
    for(var i=0;i<sbkan;i++){
      sbka[i].onclick=function(){
        if(sbk.lang){
          fta[sbk.lang].value=this.innerHTML;
          paper.countPrice();
          sbk.style.display='none';
          doSaveConfig(page.currentType,"manual");//diycookie.htm定义,manual:手动
        }
        return false; 
      }
    }
    
    document.body.onclick=function(){
      sbk.style.display='none';
    }
  }
})();
</script>
<script src="http://js.3conline.com/ue/popup/online/js/popup.js" charset="gbk"></script> 
<script type="text/javascript"> 
GlobalLogin.cmu = 'cmu'; 
GlobalLogin.csid= 'common_session_id'; 
GlobalLogin.passUrl = 'https://passport3.pconline.com.cn/passport3/passport/login.jsp'; 
</script> 
 
<script type="text/javascript">

  
function Login() {
  if(!GlobalLogin.ifLogin()){
    GlobalLogin.showFB(function(){
       document.formPaper.submit();   
    });
  }
  if (GlobalLogin.ifLogin()) {
    document.formPaper.submit();
  }
  return false; 
}

function Preview(){
  if(!GlobalLogin.ifLogin()){
    GlobalLogin.showFB(function(){
      reviewConfig();   
    });
  }
  if (GlobalLogin.ifLogin()) {
    reviewConfig();
  }
  return false; 
}

//电商装机  
window.tab2 = new Slide({
    target:$(".tab-diyer-mall .tab-wrap .pannel"),
    control:$(".tab-diyer-mall .control .item")
})

//电商热销配置排行
$('#Jswitch .pic-txt').each(function(i,elem){ 
  $(elem).bind('mouseenter',function(){
    $(this).addClass('switch');
    });
    $(elem).bind('mouseleave',function(){
    $(this).removeClass('switch');
    });    
});

//选用配件保存
function selectSaveConfig(currentType,data) {
  //必选配件检测
  var tr = $("tr", paper.dom)[currentType],ts = $$("textarea",tr);
  if(ts[0].value == "" || ts[1].value == 0) {//|| ts[2].value == 0
    return false;//从产品库选用时不判断价格
  }
  var rurl = "diycookie.jsp?r=" + new Date().getTime();
  $.ajax({url:rurl,async:true,method:"post",data:data,success:success});
}

function replaceDangerCode(argStr) {
  if(argStr) {
    
    argStr = argStr.replace(/,/g,"&#44;");
    
  } 
  return argStr;
}

String.prototype.trim = function() {
  return this.replace(/(^\s*)|(\s*$)/g, ""); 
}
window.onload = function(){
    paper.countPrice; 
}
</script> 


<script src="http://www.pconline.com.cn/global/footer/index.html" charset="gbk"></script>

  <script src="../assets/js/jquery-1.12.1.min.js" type="text/javascript"></script>
  <script src="../assets/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="../assets/js/login-register.js" type="text/javascript"></script>

</body>
</html>